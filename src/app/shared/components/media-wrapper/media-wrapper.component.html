<!-- TODO: disable preloading (for hls and dash additional configuration is required) -->
<media-controller #controller nohotkeys class="block h-full">
  @let srcs = sources();

  @if (srcs.hlsUrl) {
    <hls-video [src]="srcs.hlsUrl" slot="media" crossorigin loop></hls-video>
  } @else if (srcs.dashUrl) {
    <dash-video [src]="srcs.dashUrl" slot="media" crossorigin loop></dash-video>
  } @else {
    <video [src]="srcs.fallbackUrl" slot="media" preload="metadata" crossorigin loop></video>
  }

  <media-control-bar slot="top-chrome">
    <media-play-button>
      <ng-icon slot="play" name="matPlayArrow" size="1.25rem" />
      <ng-icon slot="pause" name="matPause" size="1.25rem" />
    </media-play-button>

    <div class="volume-controls-container" tabindex="0">
      <media-mute-button>
        <ng-icon slot="off" name="matVolumeOff" size="1.25rem" />
        <ng-icon slot="low" name="matVolumeMute" size="1.25rem" />
        <ng-icon slot="medium" name="matVolumeDown" size="1.25rem" />
        <ng-icon slot="high" name="matVolumeUp" size="1.25rem" />
      </media-mute-button>

      <media-volume-range></media-volume-range>
    </div>
  </media-control-bar>

  <media-control-bar>
    <media-time-range>
      <span slot="preview"></span>
    </media-time-range>
  </media-control-bar>
</media-controller>
